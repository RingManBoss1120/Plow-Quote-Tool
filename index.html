<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MN Plowing Quote Tool</title>

<link rel="icon" href="icons/icon-192-v2.png">
<link rel="apple-touch-icon" href="icons/icon-180-v2.png">

<style>
*{box-sizing:border-box;}

body{
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  background:#f2f4f7;
  margin:0;
  padding:20px;
}

.card{
  background:#fff;
  border-radius:16px;
  padding:18px;
  margin-bottom:16px;
  box-shadow:0 2px 6px rgba(0,0,0,.08);
}

label{
  font-weight:600;
  display:block;
  margin-bottom:6px;
}

input,select,textarea,button{
  width:100%;
  padding:12px;
  font-size:16px;
  border-radius:10px;
  border:1px solid #ccc;
  margin-bottom:10px;
}

textarea{
  resize: none;
}
  
button{
  background:#1f5fbf;
  color:#fff;
  border:none;
  font-weight:700;
}

button.secondary{
  background:#888;
}

.row{
  display:flex;
  justify-content:space-between;
  font-size:18px;
  padding:6px 0;
}

.totalRow{
  font-size:22px;
  font-weight:800;
  display:flex;
  justify-content:space-between;
}

.divider{
  height:1px;
  background:#e6e6e6;
  margin:10px 0;
}
</style>
</head>

<body>

<!-- LOGO -->
<div class="card" style="text-align:center;padding:12px;">
  <img src="MN%20Plowing%20Logo%20no%20back.png" style="max-width:320px;width:100%;">

  <div style="margin-top:6px;font-weight:600;letter-spacing:0.5px;">
    The Blizzard Busters
  </div>
</div>

<!-- CUSTOMER -->
<div class="card">
  <label>Customer Last Name</label>
  <input id="lastName" autocomplete="family-name">

  <label>Customer First Name</label>
  <input id="firstName" autocomplete="given-name">

  <label>Name of Business</label>
<input id="businessName" placeholder="N/A">
  
  <label>Customer Email</label>
<input id="customerEmail" type="email" autocomplete="email">

<label>Customer Phone</label>
<input id="customerPhone" type="tel" autocomplete="off" inputmode="tel">
  
  <label>Service Street Address</label>
  <input id="street" autocomplete="street-address">

  <label>City</label>
  <input id="city" autocomplete="address-level2">

  <label>State</label>
  <input id="state" autocomplete="address-level1">

  <label>Zip Code</label>
  <input id="zip" inputmode="numeric" autocomplete="postal-code">

  <label>Notes</label>
<textarea id="notes" rows="4" placeholder="Notes (gate code, special instructions, pricing notes, follow-up, etc.)"></textarea>
</div>

<!-- SERVICE -->
<div class="card">
  <label>Service</label>
  <select id="service">
    <option value="both">Driveway + Sidewalk</option>
    <option value="driveway">Driveway Only</option>
    <option value="sidewalk">Sidewalk Only</option>
  </select>
</div>

<!-- DRIVEWAY -->
<div class="card">
  <label>Driveway Minutes</label>
  <input id="driveMinutes" type="number">

  <label>Driveway $ / Hour</label>
  <input id="driveRate" type="number" value="400">
</div>

<!-- SIDEWALK -->
<div class="card">
  <label>Sidewalk Minutes</label>
  <input id="sideMinutes" type="number">

  <label>Sidewalk $ / Minute</label>
  <select id="sideRate">
    <option value="4">$4</option>
    <option value="5">$5</option>
    <option value="6">$6</option>
    <option value="7">$7</option>
    <option value="8">$8</option>
  </select>
</div>

<!-- PRICING -->
<div class="card">
  <div class="row" id="driveLine">
    <span>Driveway</span>
    <span id="drivePrice">$0.00</span>
  </div>

  <div class="row" id="sideLine">
    <span>Sidewalk</span>
    <span id="sidePrice">$0.00</span>
  </div>

  <div class="divider"></div>

  <div class="totalRow">
    <span>Total</span>
    <span id="totalAmount">$0.00</span>
  </div>
</div>

<!-- BUTTONS -->
<div class="card">
 <button onclick="emailQuote()">Email Quote</button>
  <button class="secondary" onclick="clearAll()">Clear</button>
</div>

<script>
const service = document.getElementById("service");
const driveMinutes = document.getElementById("driveMinutes");
const driveRate = document.getElementById("driveRate");
const sideMinutes = document.getElementById("sideMinutes");
const sideRate = document.getElementById("sideRate");

const driveLine = document.getElementById("driveLine");
const sideLine = document.getElementById("sideLine");
const drivePrice = document.getElementById("drivePrice");
const sidePrice = document.getElementById("sidePrice");
const totalAmount = document.getElementById("totalAmount");

// New customer/address fields
const lastName = document.getElementById("lastName");
const firstName = document.getElementById("firstName");
const businessName = document.getElementById("businessName");  
const customerEmail = document.getElementById("customerEmail");
const customerPhone = document.getElementById("customerPhone");
const street = document.getElementById("street");
const city = document.getElementById("city");
const state = document.getElementById("state");
const zip = document.getElementById("zip");
const notes = document.getElementById("notes");
  
function money(n){
  return "$" + (n || 0).toFixed(2);
}

function calc(){
  const dMin = Number(driveMinutes.value||0);
  const dRate = Number(driveRate.value||400);
  const sMin = Number(sideMinutes.value||0);
  const sRate = Number(sideRate.value||0);

  const dCost = (dRate/60)*dMin;
  const sCost = sMin*sRate;

  let total = 0;

  if(service.value==="both"){
    total = dCost+sCost;
    driveLine.style.display="flex";
    sideLine.style.display="flex";
  }
  if(service.value==="driveway"){
    total = dCost;
    driveLine.style.display="flex";
    sideLine.style.display="none";
  }
  if(service.value==="sidewalk"){
    total = sCost;
    driveLine.style.display="none";
    sideLine.style.display="flex";
  }

  drivePrice.textContent = money(dCost);
  sidePrice.textContent = money(sCost);
  totalAmount.textContent = money(total);
}

[service,driveMinutes,driveRate,sideMinutes,sideRate].forEach(el=>{
  el.addEventListener("input",calc);
  el.addEventListener("change",calc);
});

function clearAll(){
  lastName.value = "";
  firstName.value = "";
  businessName.value = "";
  customerEmail.value = "";

  // Clear phone (Safari sometimes auto-refills; this prevents it)
  customerPhone.value = "";
  customerPhone.blur();
  setTimeout(() => { customerPhone.value = ""; }, 0);

  street.value = "";
  city.value = "";
  state.value = "";
  zip.value = "";
  notes.value = "";
  driveMinutes.value = "";
  sideMinutes.value = "";
  calc();
}

function formatCustomer(){
  const ln = (lastName.value || "").trim();
  const fn = (firstName.value || "").trim();
  if(!ln && !fn) return "";
  if(ln && fn) return `${ln}, ${fn}`;
  return ln || fn;
}

function formatAddress(){
  const st = (street.value || "").trim();
  const c = (city.value || "").trim();
  const s = (state.value || "").trim();
  const z = (zip.value || "").trim();

  const line1 = st;
  const line2 = [c, s].filter(Boolean).join(", ") + (z ? ` ${z}` : "");
  return [line1, line2].filter(Boolean).join("\n");
}

function emailQuote(){
  const subject = `MN Plowing Quote – ${formatCustomer()}`;

const body =
`MN PLOWING
The Blizzard Busters

MN Plowing Quote
Customer: ${formatCustomer()}
Business: ${businessName.value || "N/A"}
Email: ${customerEmail.value || "—"}
Phone: ${customerPhone.value || "—"}

Address:
${formatAddress()}

Notes:
${(notes.value || "").trim() || "—"}

Driveway: ${drivePrice.textContent}
Sidewalk: ${sidePrice.textContent}
Total: ${totalAmount.textContent}`;

  const mailto =
    "mailto:info@mnplowing.com" +
    "?subject=" + encodeURIComponent(subject) +
    "&body=" + encodeURIComponent(body);

  window.location.href = mailto;
}



calc();
</script>

</body>
</html>
